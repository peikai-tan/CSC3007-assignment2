(function(){"use strict";var t={4235:function(t,e,a){a.r(e)},4028:function(t,e,a){var n=a(9242),r=a(3396),i=a(7139);const s=(0,r._)("section",{class:"hero"},[(0,r._)("div",{class:"hero-body"},[(0,r._)("p",{class:"title"}," D3 Plot "),(0,r._)("p",{class:"subtitle"}," Peikai Tan ")])],-1),o={class:"tabs is-centered"},l=["onClick"];function d(t,e,a,n,d,c){const u=(0,r.up)("BarPlot"),h=(0,r.up)("PercentagePlot");return(0,r.wg)(),(0,r.iD)(r.HY,null,[s,(0,r._)("div",o,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(d.options,(t=>((0,r.wg)(),(0,r.iD)("li",{key:t,onClick:e=>d.selectedMode=t,class:(0,i.C_)(d.selectedMode==t?"is-active":"")},[(0,r._)("a",null,(0,i.zw)(t),1)],10,l)))),128))])]),(0,r._)("section",null,["Bar Chart"==d.selectedMode?((0,r.wg)(),(0,r.j4)(u,{key:0,values:this.data,years:this.years},null,8,["values","years"])):(0,r.kq)("",!0),"Percentage Stacked Bar Chart"==d.selectedMode?((0,r.wg)(),(0,r.j4)(h,{key:1,dataAsPercentage:this.dataAsPercentage,labels:this.labels,years:this.years},null,8,["dataAsPercentage","labels","years"])):(0,r.kq)("",!0)])],64)}a(6699);const c={class:"container"},u={class:"field is-horizontal"},h=(0,r._)("div",{class:"field-label is-normal"},[(0,r._)("label",{class:"label"},"Crimes in the year")],-1),p={class:"field-body"},f={class:"field is-narrow"},y={class:"control"},g={class:"select"},v=(0,r._)("div",{class:"container has-text-centered",id:"barPlot"},null,-1),b=(0,r._)("div",{id:"tooltip"},null,-1);function m(t,e,a,s,o,l){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",c,[(0,r._)("div",u,[h,(0,r._)("div",p,[(0,r._)("div",f,[(0,r._)("div",y,[(0,r._)("div",g,[(0,r.wy)((0,r._)("select",{id:"selectButton","onUpdate:modelValue":e[0]||(e[0]=t=>o.selectedYear=t)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.years,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t},(0,i.zw)(t),1)))),128))],512),[[n.bM,o.selectedYear]])])])])])])]),v,b],64)}var w=a(3867),P={name:"BarPlot",props:["values","years"],data(){return{selectedYear:0}},mounted(){window.addEventListener("resize",this.UpdateGraph)},watch:{values(){this.RefreshValues()},selectedYear(){this.UpdateGraph()}},computed:{labels(){try{return Object.keys(this.values[this.selectedYear])}catch(t){return[]}},entries(){try{return Object.entries(this.values[this.selectedYear])}catch(t){return{}}}},methods:{RefreshValues(){for(var t in this.years)this.selectedYear=Math.max(this.years[t],this.selectedYear);this.UpdateGraph()},UpdateGraph(){document.getElementById("barPlot").innerHTML="";var t={top:50,right:50,bottom:50,left:50},e=.9*document.getElementById("barPlot").offsetWidth-t.left-t.right,a=.75*window.innerHeight-t.top-t.bottom,n=w.Ys("#tooltip").attr("class","d3-tooltip").style("position","absolute").style("top","0").style("left","0").style("visibility","hidden").style("padding","15px").style("background","rgba(0,0,0,0.6)").style("border-radius","5px").style("color","#fff"),r=w.Ys("#barPlot").append("svg").attr("width",e+t.left+t.right).attr("height",a+t.top+t.bottom).append("g").attr("transform","translate("+t.left+","+t.top+")"),i=w.tiA().range([0,e]).domain(this.labels).padding(.2);r.append("g").attr("transform","translate(0,"+a+")").call(w.LLu(i)).selectAll("text").style("text-anchor","middle");var s=0;this.entries.forEach((function(t){s=Math.max(s,parseInt(t[1]))})),s=1e3*Math.ceil(s/9*10/1e3);var o=w.BYU().domain([0,s]).range([a,0]);r.append("g").call(w.y4O(o)),r.selectAll("mybar").data(this.entries).enter().append("rect").attr("class","bar").attr("x",(function(t){return i(t[0])})).attr("width",i.bandwidth()).attr("fill","#69b3a2").attr("height",(function(t){return a-o(t[1])})).attr("y",(function(t){return n.html("Data: "+t[1]),o(t[1])})).on("mouseover",(function(t,e){null!=t&&(n.html(`${e[0]}: ${e[1]}`).style("visibility","visible"),w.Ys(this).transition().duration("50").attr("opacity",".85"),n.transition().duration(50).style("visibility","visible"))})).on("mousemove",(function(t){n.style("top",t.clientY-10+"px").style("left",t.clientX+10+"px")})).on("mouseout",(function(){w.Ys(this).transition().duration("50").attr("opacity","1"),n.transition().duration(50).style("visibility","hidden")}))}}},_=a(89);const Y=(0,_.Z)(P,[["render",m]]);var k=Y;const x=(0,r._)("div",{class:"container has-text-centered",id:"percentagePlot"},null,-1),O=(0,r._)("div",{id:"tooltip"},null,-1);function A(t,e,a,n,i,s){return(0,r.wg)(),(0,r.iD)(r.HY,null,[x,O],64)}var B={name:"PercentagePlot",props:["labels","years","dataAsPercentage"],mounted(){window.addEventListener("resize",this.UpdateGraph),this.UpdateGraph()},watch:{values(){this.UpdateGraph()}},methods:{UpdateGraph(){document.getElementById("percentagePlot").innerHTML="";var t={top:50,right:50,bottom:50,left:50},e=.9*document.getElementById("percentagePlot").offsetWidth-t.left-t.right,a=.75*window.innerHeight-t.top-t.bottom,n=w.Ys("#tooltip").attr("class","d3-tooltip").style("position","absolute").style("top","0").style("left","0").style("visibility","hidden").style("padding","15px").style("background","rgba(0,0,0,0.6)").style("border-radius","5px").style("color","#fff"),r=w.Ys("#percentagePlot").append("svg").attr("width",e+t.left+t.right).attr("height",a+t.top+t.bottom).append("g").attr("transform","translate("+t.left+","+t.top+")"),i=w.tiA().range([0,e]).domain(this.years).padding(.2);r.append("g").attr("transform","translate(0,"+a+")").call(w.LLu(i)).selectAll("text").style("text-anchor","middle");var s=w.BYU().domain([0,100]).range([a,0]);r.append("g").call(w.y4O(s));var o=w.PKp().domain(this.labels).range(["#c4bd09","#114803","#27cb73","#5033ad","#bf21c5","#4eed92","#a0be3f","#5a5831","#c89cc9","#846240"]),l=w.knu().keys(this.labels)(Object.values(this.dataAsPercentage));r.append("g").selectAll("g").data(l).enter().append("g").attr("fill",(function(t){return o(t.key)})).selectAll("rect").data((function(t){return t})).enter().append("rect").attr("x",(function(t){return i(t.data.group)})).attr("y",(function(t){return s(t[1])})).attr("height",(function(t){return s(t[0])-s(t[1])})).attr("width",i.bandwidth()).on("mouseover",(function(t,e){if(null!=t){var a=w.Ys(this.parentNode).datum().key;console.log(a),console.log(e),n.html(`${a}: ${e[1]-e[0]}%`).style("visibility","visible"),w.Ys(this).transition().duration("50").attr("opacity",".85"),n.transition().duration(50).style("visibility","visible")}})).on("mousemove",(function(t){n.style("top",t.clientY-10+"px").style("left",t.clientX+10+"px")})).on("mouseout",(function(){w.Ys(this).transition().duration("50").attr("opacity","1"),n.transition().duration(50).style("visibility","hidden")}))}}};const M=(0,_.Z)(B,[["render",A]]);var j=M,C=a(6265),D=a.n(C);const U="https://data.gov.sg/api/action/datastore_search?resource_id=83c21090-bd19-4b54-ab6b-d999c251edcf";var H={name:"App",components:{BarPlot:k,PercentagePlot:j},mounted(){D().get(U).then((t=>{this.ParseData(t)}))},data(){return{years:[],labels:[],dataAsPercentage:{},data:{},options:["Bar Chart","Percentage Stacked Bar Chart"],selectedMode:"Bar Chart"}},methods:{ParseData(t){var e,a,n;for(var r in this.data={},t=t.data.result.records,t)e=t[r],a=e.year,n=e.level_2,this.labels.includes(n)||this.labels.push(n),void 0==this.data[a]&&(this.data[a]={},this.years.push(parseInt(a)),this.dataAsPercentage[a]={},this.dataAsPercentage[a]["group"]=parseInt(a)),this.data[a][n]=parseInt(e.value);for(a in this.data){const t=Object.values(this.data[a]).reduce(((t,e)=>t+e),0);for(n in this.data[a])this.dataAsPercentage[a][n]=Math.round(this.data[a][n]/t*1e4)/100}}}};const E=(0,_.Z)(H,[["render",d]]);var G=E;a(4235),(0,n.ri)(G).mount("#app")}},e={};function a(n){var r=e[n];if(void 0!==r)return r.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,n,r,i){if(!n){var s=1/0;for(c=0;c<t.length;c++){n=t[c][0],r=t[c][1],i=t[c][2];for(var o=!0,l=0;l<n.length;l++)(!1&i||s>=i)&&Object.keys(a.O).every((function(t){return a.O[t](n[l])}))?n.splice(l--,1):(o=!1,i<s&&(s=i));if(o){t.splice(c--,1);var d=r();void 0!==d&&(e=d)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[n,r,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var r,i,s=n[0],o=n[1],l=n[2],d=0;if(s.some((function(e){return 0!==t[e]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(l)var c=l(a)}for(e&&e(n);d<s.length;d++)i=s[d],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(c)},n=self["webpackChunkcsc3007_assignment2"]=self["webpackChunkcsc3007_assignment2"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(4028)}));n=a.O(n)})();
//# sourceMappingURL=app.0c13e85a.js.map